<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>消息</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" type="text/css" href="SUI/sm.min.css"/>
		<style>
			.buttons-row{
				width: 40%;
				margin: 0 auto;
			}
			.bar .searchbar{
				background: #efeff4;
			}
			#search{
				background: rgba(0,0,0,.1);
			}
			#msg-page,#ab-page,#dt-page{
				animation: none !important;
				-webkit-animation: none !important;
			}
			#info-panel{
				background-color: white
			}
			#self-head{
				width: 3rem;
				height: 3rem;
				border-radius:50%;
				float: left;
			}
		</style>
	</head>
	<body>
		<div class="page-group">
			<!--消息页面-->
			<div class="page page-current" id="msg-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a href="#" class="pull-left icon icon-me open-panel" data-panel="#info-panel"></a>
					<button class="button pull-right"><b>+</b></button>
					<div class="buttons-row">
						<a href="#" class="tab-link button active">消息</a>
						<a href="#" class="tab-link button">电话</a>
					</div>
				</header>
				<!--搜索框-->
				<div class="bar bar-header-secondary">
				  <div class="searchbar">
				    <a class="searchbar-cancel">取消</a>
				    <div class="search-input">
				      <label class="icon icon-search" for="search"></label>
				      <input type="search" id='search' placeholder='搜索'/>
				    </div>
				  </div>
				</div>
				
				<!--工具栏-->
				<div class="bar bar-tab">
					<a href="#" class="tab-item active">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
						<span class="badge">99+</span>
					</a>
					<a href="#ab-page" class="tab-item">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a href="#dt-page" class="tab-item">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</div>
				<!--内容区-->
				<div class="content close-panel">
					<div class="content-block">
						这里是好友列表
					</div>
				</div>
			</div>
			
			<!--联系人页面-->
			<div class="page" id="ab-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a href="#" class="pull-left icon icon-me"></a>
					<h1 class="title">联系人</h1>
					<button class="button button-link button-nav pull-right">添加</button>
				</header>
				<!--搜索框-->
				<div class="bar bar-header-secondary">
				  <div class="searchbar">
				    <a class="searchbar-cancel">取消</a>
				    <div class="search-input">
				      <label class="icon icon-search" for="search"></label>
				      <input type="search" id='search' placeholder='搜索'/>
				    </div>
				  </div>
				</div>
				<!--工具栏-->
				<div class="bar bar-tab">
					<a href="#msg-page" class="tab-item">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
					</a>
					<a href="#" class="tab-item active">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a href="#dt-page" class="tab-item">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</div>
				<!--内容区-->
				<div class="content">
					<div class="content-block">
						这里是联系人内容
					</div>
				</div>
			</div>
			
			<!--动态页面-->
			<div class="page" id="dt-page">
				<!--导航栏-->
				<header class="bar bar-nav">
					<a href="#" class="pull-left icon icon-me"></a>
					<h1 class="title">动态</h1>
					<button class="button button-link button-nav pull-right">更多</button>
				</header>
				<!--搜索框-->
				<div class="bar bar-header-secondary">
				  <div class="searchbar">
				    <a class="searchbar-cancel">取消</a>
				    <div class="search-input">
				      <label class="icon icon-search" for="search"></label>
				      <input type="search" id='search' placeholder='搜索电影/音乐/商品...'/>
				    </div>
				  </div>
				</div>
				<!--工具栏-->
				<div class="bar bar-tab">
					<a href="#msg-page" class="tab-item">
						<span class="icon icon-message"></span>
						<span class="tab-label">消息</span>
					</a>
					<a href="#ab-page" class="tab-item">
						<span class="icon icon-friends"></span>
						<span class="tab-label">联系人</span>
					</a>
					<a href="#dt-page" class="tab-item active">
						<span class="icon icon-star"></span>
						<span class="tab-label">动态</span>
					</a>
				</div>
				<!--内容区-->
				<div class="content">
					<div class="content-block">
						这里是联系人内容
					</div>
				</div>
			</div>
			
			<!--侧栏-->
			<div class="panel panel-left panel-reveal" id="info-panel">
				<div class="content-block">
					<div id="self-info">
						<img id="self-head" src="img/3.jpg"/>
						<span id="self-name">我的昵称</span>
						<br />
						<div id="self-level"></div>
						<div style="clear: both;"></div>
						<p>今天捡了100块钱</p>
					</div>
					<div class="list-block">
						<ul>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-gift"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">了解会员特权</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-cart"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">QQ钱包</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-emoji"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">个性装扮</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-star"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的收藏</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-picture"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的相册</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-edit"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的文件</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-card"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">我的名片夹</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		
		
		</div>
	</body>
	<script src="SUI/zepto.min.js"></script>
	<script src="SUI/sm.min.js"></script>
	<script>
		
		//URL中第一个#后面的字符串是url的哈希值。hash值不会随请求发送到服务器，仅仅是指导浏览器当页面加载完成时显示页面的哪个部分，
		//window.location.hash可以访问当前页面的hash值
		//window.onhashchange事件可以监听hash的变化。
		
		//当页面马上要出现的时候触发
		$(document).on("pageInit","#msg-page",function(e,pageId,$page){
			document.title = "消息";
		});
		$(document).on("pageInit","#ab-page",function(e,pageId,$page){
			document.title = "联系人";
		})
		$(document).on("pageInit","#dt-page",function(e,pageId,$page){
			document.title = "动态";
		})
		
		var myLevel = 53;
		
		function refreshLevel(level){
			var levelArray = [];
			while (level/4>=1){
				var remainder = level%4;
				levelArray.unshift(remainder);
				level = Math.floor(level/4);
			}
			levelArray.unshift(level);
			for (var i = 0;i<levelArray.length;i++){
				var picName;
				switch (levelArray.length-i){
				case 3:
					picName = "sun.png";
					break;
				case 2:
					picName = "moon.png";
					break;
				case 1:
					picName = "star.png";
						break;
					default:
						break;
				}
				console.log(picName)
				for (var j = 0;j < levelArray[i];j++){
					$("<img />")
					.attr("src","img/"+picName)
					.css("width","0.8rem")
					.css("height","0.8rem")
					.appendTo($("#self-level"))
				}
			}
		}
		refreshLevel(myLevel);
		
		//初始化SUI
		$.init();
	</script>
</html>
